[
  {
    "WorkflowName": "TransactionRules",
    "Rules": [
      {
        "RuleName": "NegativePurchaseAmount",
        "RuleExpressionType": "LambdaExpression",
        "Expression": "input1.TransactionType != \"Purchase\" || input1.Amount > 0",
        "ErrorMessage": "PURCHASE amount cannot be negative"
      },
      {
        "RuleName": "RefundRequiresOriginalPurchase",
        "RuleExpressionType": "LambdaExpression",
        "Expression": "input1.TransactionType != \"Refund\" || input1.OriginalPurchaseExists == true",
        "ErrorMessage": "REFUND must reference an existing PURCHASE transaction"
      },
      {
        "RuleName": "DailyMerchantLimit",
        "RuleExpressionType": "LambdaExpression",
        "Expression": "input1.TransactionType != \"Purchase\" || input1.ProjectedDailyTotal <= input1.DailyMerchantLimit",
        "ErrorMessage": "Daily merchant purchase limit would be exceeded"
      },
      {
        "RuleName": "HighValueReview",
        "RuleExpressionType": "LambdaExpression",
        "Expression": "input1.Amount > input1.HighValueThreshold",
        "SuccessEvent": "REVIEW"
      }
    ]
  }
]
